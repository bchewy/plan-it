import{a as c}from"./Navbar-2917e1de.js";import{_ as u,o as i,c as n,t as l,d,a as o,w as m,q as h,F as p,f,m as y}from"./index-751a66e8.js";const g={props:["user"],setup(){return{}},data(){return{friendEmail:"",errorMessage:"",successMessage:"",searchResults:[]}},methods:{async sendFriendRequest(){if(!this.user.sub){this.errorMessage="User prop wasn't passed properly.";return}try{const e=await c.post(`https://api.bchwy.com/users/${this.user.email}/friend_requests/send`,{friend_email:this.friendEmail},{headers:{"Content-Type":"application/json","x-api-key":"PlanItIsTheBestProjectEverXYZ"},validateStatus:function(s){return s>=200&&s<500}});e.status===200?(this.successMessage="Friend request sent successfully.",this.$emit("friendRequestSent")):e.status===400?this.errorMessage="Friend request already sent.":e.status===404&&(this.errorMessage="Friend not found.")}catch{this.errorMessage="Please try again later. The backend may be down."}this.searchResults=[]},async searchFriends(){try{const e=await c.get(`https://api.bchwy.com/users/search/${this.friendEmail}`,{headers:{"Content-Type":"application/json","x-api-key":"PlanItIsTheBestProjectEverXYZ"}});this.searchResults=e.data}catch(e){console.error(e)}},selectFriend(e){this.friendEmail=e.email,this.searchResults=[]}}},_={key:0,class:"alert alert-danger",role:"alert"},F={key:1,class:"alert alert-success",role:"alert"},w={class:"form-group mb-2 me-md-2 flex-grow-1"},b=o("label",{for:"friendEmail",class:"sr-only"},"Friend's Email:",-1),E={key:0,class:"dropdown-menu show"},M=["onClick"],v=o("button",{type:"submit",class:"btn btn-primary mb-2 flex-shrink-0"},"Send Friend Request",-1);function x(e,s,k,R,r,a){return i(),n("div",null,[r.errorMessage?(i(),n("div",_,l(r.errorMessage),1)):d("",!0),r.successMessage?(i(),n("div",F,l(r.successMessage),1)):d("",!0),o("form",{onSubmit:s[2]||(s[2]=y((...t)=>a.sendFriendRequest&&a.sendFriendRequest(...t),["prevent"])),class:"d-flex flex-column flex-md-row align-items-start align-items-md-center"},[o("div",w,[b,m(o("input",{id:"friendEmail","onUpdate:modelValue":s[0]||(s[0]=t=>r.friendEmail=t),type:"email",class:"form-control",required:"",placeholder:"Friend's Email",onInput:s[1]||(s[1]=(...t)=>a.searchFriends&&a.searchFriends(...t))},null,544),[[h,r.friendEmail]]),r.searchResults.length?(i(),n("div",E,[(i(!0),n(p,null,f(r.searchResults,t=>(i(),n("a",{class:"dropdown-item",onClick:q=>a.selectFriend(t)},l(t.email),9,M))),256))])):d("",!0)]),v],32)])}const C=u(g,[["render",x]]);export{C as A};
