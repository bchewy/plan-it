import{M as ue}from"./MapItem-bd834173.js";import{A as he,F as ve,B as _e}from"./Badges-8adfbbcb.js";import{N as fe}from"./Navbar-faf4802b.js";import{m as B,t as be,r as b,d as me,a as pe,v as ye,c as ee,i as R,A as ge,P as xe,B as we,e as ke,b as Ce,C as O,f as Me,g as Ee}from"./Compare-2a9863ff.js";import{_ as te,o as _,c as f,a as n,t as g,d as x,n as Ie,u as Pe,e as I,r as P,b as E,m as N,i as C,F as D,f as U,q as H,v as G,g as Te,p as Re,h as Se}from"./index-0fdca0a9.js";import{a as K}from"./axios-21b846bc.js";import"./index-f203fe86.js";/* empty css              */const Ae={name:"ExpProgressBar",props:{userExp:{type:Number,required:!0}},computed:{formattedExp(){return console.log(this.userExp),this.userExp?this.userExp.toFixed(0):"0.00"}}},Be={key:0,class:"progress",style:{position:"relative"}},Fe={key:0,class:"progress-bar-text"},Ne={key:0,class:"text-muted"};function De(e,s,t,r,a,i){return _(),f("div",null,[t.userExp!==void 0?(_(),f("div",Be,[n("div",{class:"progress-bar bg-success",role:"progressbar",style:Ie({width:t.userExp+"%",minWidth:"1em"}),"aria-valuenow":"userExp","aria-valuemin":"0","aria-valuemax":"100"},[t.userExp>=20?(_(),f("span",Fe,g(i.formattedExp)+"%",1)):x("",!0)],4),t.userExp<20?(_(),f("span",Ne," "+g(t.userExp)+"%",1)):x("",!0)])):x("",!0)])}const ze=te(Ae,[["render",De],["__scopeId","data-v-998ab034"]]);/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var Z=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),S={toTextLines:function(e){var s=[],t;for(e=[].concat(e);e.length;)t=e.pop(),typeof t=="string"?s.unshift.apply(s,t.split(`
`)):Array.isArray(t)?e.push.apply(e,t):R(e)||s.unshift(""+t);return s},textSize:function(e,s,t){var r=[].concat(s),a=r.length,i=e.font,o=0,l;for(e.font=t.string,l=0;l<a;++l)o=Math.max(e.measureText(r[l]).width,o);return e.font=i,{height:a*t.lineHeight,width:o}},bound:function(e,s,t){return Math.max(e,Math.min(s,t))},arrayDiff:function(e,s){var t=e.slice(),r=[],a,i,o,l;for(a=0,o=s.length;a<o;++a)l=s[a],i=t.indexOf(l),i===-1?r.push([l,1]):t.splice(i,1);for(a=0,o=t.length;a<o;++a)r.push([t[a],-1]);return r},rasterize:function(e){return Math.round(e*Z)/Z}};function X(e,s){var t=s.x,r=s.y;if(t===null)return{x:0,y:-1};if(r===null)return{x:1,y:0};var a=e.x-t,i=e.y-r,o=Math.sqrt(a*a+i*i);return{x:o?a/o:0,y:o?i/o:-1}}function Ve(e,s,t,r,a){switch(a){case"center":t=r=0;break;case"bottom":t=0,r=1;break;case"right":t=1,r=0;break;case"left":t=-1,r=0;break;case"top":t=0,r=-1;break;case"start":t=-t,r=-r;break;case"end":break;default:a*=Math.PI/180,t=Math.cos(a),r=Math.sin(a);break}return{x:e,y:s,vx:t,vy:r}}var qe=0,se=1,re=2,ae=4,ie=8;function z(e,s,t){var r=qe;return e<t.left?r|=se:e>t.right&&(r|=re),s<t.top?r|=ie:s>t.bottom&&(r|=ae),r}function Le(e,s){for(var t=e.x0,r=e.y0,a=e.x1,i=e.y1,o=z(t,r,s),l=z(a,i,s),u,c,h;!(!(o|l)||o&l);)u=o||l,u&ie?(c=t+(a-t)*(s.top-r)/(i-r),h=s.top):u&ae?(c=t+(a-t)*(s.bottom-r)/(i-r),h=s.bottom):u&re?(h=r+(i-r)*(s.right-t)/(a-t),c=s.right):u&se&&(h=r+(i-r)*(s.left-t)/(a-t),c=s.left),u===o?(t=c,r=h,o=z(t,r,s)):(a=c,i=h,l=z(a,i,s));return{x0:t,x1:a,y0:r,y1:i}}function V(e,s){var t=s.anchor,r=e,a,i;return s.clamp&&(r=Le(r,s.area)),t==="start"?(a=r.x0,i=r.y0):t==="end"?(a=r.x1,i=r.y1):(a=(r.x0+r.x1)/2,i=(r.y0+r.y1)/2),Ve(a,i,e.vx,e.vy,s.align)}var q={arc:function(e,s){var t=(e.startAngle+e.endAngle)/2,r=Math.cos(t),a=Math.sin(t),i=e.innerRadius,o=e.outerRadius;return V({x0:e.x+r*i,y0:e.y+a*i,x1:e.x+r*o,y1:e.y+a*o,vx:r,vy:a},s)},point:function(e,s){var t=X(e,s.origin),r=t.x*e.options.radius,a=t.y*e.options.radius;return V({x0:e.x-r,y0:e.y-a,x1:e.x+r,y1:e.y+a,vx:t.x,vy:t.y},s)},bar:function(e,s){var t=X(e,s.origin),r=e.x,a=e.y,i=0,o=0;return e.horizontal?(r=Math.min(e.x,e.base),i=Math.abs(e.base-e.x)):(a=Math.min(e.y,e.base),o=Math.abs(e.base-e.y)),V({x0:r,y0:a+o,x1:r+i,y1:a,vx:t.x,vy:t.y},s)},fallback:function(e,s){var t=X(e,s.origin);return V({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:t.x,vy:t.y},s)}},w=S.rasterize;function Oe(e){var s=e.borderWidth||0,t=e.padding,r=e.size.height,a=e.size.width,i=-a/2,o=-r/2;return{frame:{x:i-t.left-s,y:o-t.top-s,w:a+t.width+s*2,h:r+t.height+s*2},text:{x:i,y:o,w:a,h:r}}}function We(e,s){var t=s.chart.getDatasetMeta(s.datasetIndex).vScale;if(!t)return null;if(t.xCenter!==void 0&&t.yCenter!==void 0)return{x:t.xCenter,y:t.yCenter};var r=t.getBasePixel();return e.horizontal?{x:r,y:null}:{x:null,y:r}}function je(e){return e instanceof ge?q.arc:e instanceof xe?q.point:e instanceof we?q.bar:q.fallback}function Ue(e,s,t,r,a,i){var o=Math.PI/2;if(i){var l=Math.min(i,a/2,r/2),u=s+l,c=t+l,h=s+r-l,d=t+a-l;e.moveTo(s,c),u<h&&c<d?(e.arc(u,c,l,-Math.PI,-o),e.arc(h,c,l,-o,0),e.arc(h,d,l,0,o),e.arc(u,d,l,o,Math.PI)):u<h?(e.moveTo(u,t),e.arc(h,c,l,-o,o),e.arc(u,c,l,o,Math.PI+o)):c<d?(e.arc(u,c,l,-Math.PI,0),e.arc(u,d,l,0,Math.PI)):e.arc(u,c,l,-Math.PI,Math.PI),e.closePath(),e.moveTo(s,t)}else e.rect(s,t,r,a)}function He(e,s,t){var r=t.backgroundColor,a=t.borderColor,i=t.borderWidth;!r&&(!a||!i)||(e.beginPath(),Ue(e,w(s.x)+i/2,w(s.y)+i/2,w(s.w)-i,w(s.h)-i,t.borderRadius),e.closePath(),r&&(e.fillStyle=r,e.fill()),a&&i&&(e.strokeStyle=a,e.lineWidth=i,e.lineJoin="miter",e.stroke()))}function Ge(e,s,t){var r=t.lineHeight,a=e.w,i=e.x,o=e.y+r/2;return s==="center"?i+=a/2:(s==="end"||s==="right")&&(i+=a),{h:r,w:a,x:i,y:o}}function Ke(e,s,t){var r=e.shadowBlur,a=t.stroked,i=w(t.x),o=w(t.y),l=w(t.w);a&&e.strokeText(s,i,o,l),t.filled&&(r&&a&&(e.shadowBlur=0),e.fillText(s,i,o,l),r&&a&&(e.shadowBlur=r))}function Xe(e,s,t,r){var a=r.textAlign,i=r.color,o=!!i,l=r.font,u=s.length,c=r.textStrokeColor,h=r.textStrokeWidth,d=c&&h,m;if(!(!u||!o&&!d))for(t=Ge(t,a,l),e.font=l.string,e.textAlign=a,e.textBaseline="middle",e.shadowBlur=r.textShadowBlur,e.shadowColor=r.textShadowColor,o&&(e.fillStyle=i),d&&(e.lineJoin="round",e.lineWidth=h,e.strokeStyle=c),m=0,u=s.length;m<u;++m)Ke(e,s[m],{stroked:d,filled:o,w:t.w,x:t.x,y:t.y+t.h*m})}var oe=function(e,s,t,r){var a=this;a._config=e,a._index=r,a._model=null,a._rects=null,a._ctx=s,a._el=t};B(oe.prototype,{_modelize:function(e,s,t,r){var a=this,i=a._index,o=be(b([t.font,{}],r,i)),l=b([t.color,me.color],r,i);return{align:b([t.align,"center"],r,i),anchor:b([t.anchor,"center"],r,i),area:r.chart.chartArea,backgroundColor:b([t.backgroundColor,null],r,i),borderColor:b([t.borderColor,null],r,i),borderRadius:b([t.borderRadius,0],r,i),borderWidth:b([t.borderWidth,0],r,i),clamp:b([t.clamp,!1],r,i),clip:b([t.clip,!1],r,i),color:l,display:e,font:o,lines:s,offset:b([t.offset,4],r,i),opacity:b([t.opacity,1],r,i),origin:We(a._el,r),padding:pe(b([t.padding,4],r,i)),positioner:je(a._el),rotation:b([t.rotation,0],r,i)*(Math.PI/180),size:S.textSize(a._ctx,s,o),textAlign:b([t.textAlign,"start"],r,i),textShadowBlur:b([t.textShadowBlur,0],r,i),textShadowColor:b([t.textShadowColor,l],r,i),textStrokeColor:b([t.textStrokeColor,l],r,i),textStrokeWidth:b([t.textStrokeWidth,0],r,i)}},update:function(e){var s=this,t=null,r=null,a=s._index,i=s._config,o,l,u,c=b([i.display,!0],e,a);c&&(o=e.dataset.data[a],l=ye(ee(i.formatter,[o,e]),o),u=R(l)?[]:S.toTextLines(l),u.length&&(t=s._modelize(c,u,i,e),r=Oe(t))),s._model=t,s._rects=r},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,s){var t=this,r=e.ctx,a=t._model,i=t._rects,o;this.visible()&&(r.save(),a.clip&&(o=a.area,r.beginPath(),r.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),r.clip()),r.globalAlpha=S.bound(0,a.opacity,1),r.translate(w(s.x),w(s.y)),r.rotate(a.rotation),He(r,i.frame,a),Xe(r,a.lines,i.text,a),r.restore())}});var Ye=Number.MIN_SAFE_INTEGER||-9007199254740991,$e=Number.MAX_SAFE_INTEGER||9007199254740991;function T(e,s,t){var r=Math.cos(t),a=Math.sin(t),i=s.x,o=s.y;return{x:i+r*(e.x-i)-a*(e.y-o),y:o+a*(e.x-i)+r*(e.y-o)}}function Q(e,s){var t=$e,r=Ye,a=s.origin,i,o,l,u,c;for(i=0;i<e.length;++i)o=e[i],l=o.x-a.x,u=o.y-a.y,c=s.vx*l+s.vy*u,t=Math.min(t,c),r=Math.max(r,c);return{min:t,max:r}}function L(e,s){var t=s.x-e.x,r=s.y-e.y,a=Math.sqrt(t*t+r*r);return{vx:(s.x-e.x)/a,vy:(s.y-e.y)/a,origin:e,ln:a}}var ne=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};B(ne.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,s,t){this._rotation=t,this._rect={x:s.x+e.x,y:s.y+e.y,w:s.w,h:s.h}},contains:function(e){var s=this,t=1,r=s._rect;return e=T(e,s.center(),-s._rotation),!(e.x<r.x-t||e.y<r.y-t||e.x>r.x+r.w+t*2||e.y>r.y+r.h+t*2)},intersects:function(e){var s=this._points(),t=e._points(),r=[L(s[0],s[1]),L(s[0],s[3])],a,i,o;for(this._rotation!==e._rotation&&r.push(L(t[0],t[1]),L(t[0],t[3])),a=0;a<r.length;++a)if(i=Q(s,r[a]),o=Q(t,r[a]),i.max<o.min||o.max<i.min)return!1;return!0},_points:function(){var e=this,s=e._rect,t=e._rotation,r=e.center();return[T({x:s.x,y:s.y},r,t),T({x:s.x+s.w,y:s.y},r,t),T({x:s.x+s.w,y:s.y+s.h},r,t),T({x:s.x,y:s.y+s.h},r,t)]}});function le(e,s,t){var r=s.positioner(e,s),a=r.vx,i=r.vy;if(!a&&!i)return{x:r.x,y:r.y};var o=t.w,l=t.h,u=s.rotation,c=Math.abs(o/2*Math.cos(u))+Math.abs(l/2*Math.sin(u)),h=Math.abs(o/2*Math.sin(u))+Math.abs(l/2*Math.cos(u)),d=1/Math.max(Math.abs(a),Math.abs(i));return c*=a*d,h*=i*d,c+=s.offset*a,h+=s.offset*i,{x:r.x+c,y:r.y+h}}function Je(e,s){var t,r,a,i;for(t=e.length-1;t>=0;--t)for(a=e[t].$layout,r=t-1;r>=0&&a._visible;--r)i=e[r].$layout,i._visible&&a._box.intersects(i._box)&&s(a,i);return e}function Ze(e){var s,t,r,a,i,o,l;for(s=0,t=e.length;s<t;++s)r=e[s],a=r.$layout,a._visible&&(l=new Proxy(r._el,{get:(u,c)=>u.getProps([c],!0)[c]}),i=r.geometry(),o=le(l,r.model(),i),a._box.update(o,i,r.rotation()));return Je(e,function(u,c){var h=u._hidable,d=c._hidable;h&&d||d?c._visible=!1:h&&(u._visible=!1)})}var A={prepare:function(e){var s=[],t,r,a,i,o;for(t=0,a=e.length;t<a;++t)for(r=0,i=e[t].length;r<i;++r)o=e[t][r],s.push(o),o.$layout={_box:new ne,_hidable:!1,_visible:!0,_set:t,_idx:o._index};return s.sort(function(l,u){var c=l.$layout,h=u.$layout;return c._idx===h._idx?h._set-c._set:h._idx-c._idx}),this.update(s),s},update:function(e){var s=!1,t,r,a,i,o;for(t=0,r=e.length;t<r;++t)a=e[t],i=a.model(),o=a.$layout,o._hidable=i&&i.display==="auto",o._visible=a.visible(),s|=o._hidable;s&&Ze(e)},lookup:function(e,s){var t,r;for(t=e.length-1;t>=0;--t)if(r=e[t].$layout,r&&r._visible&&r._box.contains(s))return e[t];return null},draw:function(e,s){var t,r,a,i,o,l;for(t=0,r=s.length;t<r;++t)a=s[t],i=a.$layout,i._visible&&(o=a.geometry(),l=le(a._el,a.model(),o),i._box.update(l,o,a.rotation()),a.draw(e,l))}},Qe=function(e){if(R(e))return null;var s=e,t,r,a;if(Ce(e))if(!R(e.label))s=e.label;else if(!R(e.r))s=e.r;else for(s="",t=Object.keys(e),a=0,r=t.length;a<r;++a)s+=(a!==0?", ":"")+t[a]+": "+e[t[a]];return""+s},et={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Qe,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},p="$datalabels",de="$default";function tt(e,s){var t=e.datalabels,r={},a=[],i,o;return t===!1?null:(t===!0&&(t={}),s=B({},[s,t]),i=s.labels||{},o=Object.keys(i),delete s.labels,o.length?o.forEach(function(l){i[l]&&a.push(B({},[s,i[l],{_key:l}]))}):a.push(s),r=a.reduce(function(l,u){return ke(u.listeners||{},function(c,h){l[h]=l[h]||{},l[h][u._key||de]=c}),delete u.listeners,l},{}),{labels:a,listeners:r})}function Y(e,s,t,r){if(s){var a=t.$context,i=t.$groups,o;s[i._set]&&(o=s[i._set][i._key],o&&ee(o,[a,r])===!0&&(e[p]._dirty=!0,t.update(a)))}}function st(e,s,t,r,a){var i,o;!t&&!r||(t?r?t!==r&&(o=i=!0):o=!0:i=!0,o&&Y(e,s.leave,t,a),i&&Y(e,s.enter,r,a))}function rt(e,s){var t=e[p],r=t._listeners,a,i;if(!(!r.enter&&!r.leave)){if(s.type==="mousemove")i=A.lookup(t._labels,s);else if(s.type!=="mouseout")return;a=t._hovered,t._hovered=i,st(e,r,a,i,s)}}function at(e,s){var t=e[p],r=t._listeners.click,a=r&&A.lookup(t._labels,s);a&&Y(e,r,a,s)}var it={id:"datalabels",defaults:et,beforeInit:function(e){e[p]={_actives:[]}},beforeUpdate:function(e){var s=e[p];s._listened=!1,s._listeners={},s._datasets=[],s._labels=[]},afterDatasetUpdate:function(e,s,t){var r=s.index,a=e[p],i=a._datasets[r]=[],o=e.isDatasetVisible(r),l=e.data.datasets[r],u=tt(l,t),c=s.meta.data||[],h=e.ctx,d,m,y,$,W,J,M,k;for(h.save(),d=0,y=c.length;d<y;++d)if(M=c[d],M[p]=[],o&&M&&e.getDataVisibility(d)&&!M.skip)for(m=0,$=u.labels.length;m<$;++m)W=u.labels[m],J=W._key,k=new oe(W,h,M,d),k.$groups={_set:r,_key:J||de},k.$context={active:!1,chart:e,dataIndex:d,dataset:l,datasetIndex:r},k.update(k.$context),M[p].push(k),i.push(k);h.restore(),B(a._listeners,u.listeners,{merger:function(F,j,ce){j[F]=j[F]||{},j[F][s.index]=ce[F],a._listened=!0}})},afterUpdate:function(e){e[p]._labels=A.prepare(e[p]._datasets)},afterDatasetsDraw:function(e){A.draw(e,e[p]._labels)},beforeEvent:function(e,s){if(e[p]._listened){var t=s.event;switch(t.type){case"mousemove":case"mouseout":rt(e,t);break;case"click":at(e,t);break}}},afterEvent:function(e){var s=e[p],t=s._actives,r=s._actives=e.getActiveElements(),a=S.arrayDiff(t,r),i,o,l,u,c,h,d;for(i=0,o=a.length;i<o;++i)if(c=a[i],c[1])for(d=c[0].element[p]||[],l=0,u=d.length;l<u;++l)h=d[l],h.$context.active=c[1]===1,h.update(h.$context);(s._dirty||a.length)&&(A.update(s._labels),e.render()),delete s._dirty}};O.register(...Me);O.register(it);const ot={created(){this.fetchData()},watch:{activeTab:{immediate:!0,handler(e,s){e==="routes"&&this.$nextTick(()=>{this.fetchData()})}}},data(){const{user:e,isAuthenticated:s}=Pe(),t=I(0),r=I(0),a=I(0),i=I(0),o=I(0);return{userExp:t,expToNextLevel:r,userLvl:a,activeTab:"profile",isLoading:!1,currentPage:1,itemsPerPage:3,user:e,isAuthenticated:s,routes:[],friends:[],friendRequests:[],receivedRequests:[],sentRequests:[],isSubmitted:!1,newFriends:!1,newFeatures:!1,lostPlace:!1,carbonSavings:i,totalKM:o}},computed:{paginatedRoutes(){const e=(this.currentPage-1)*this.itemsPerPage,s=e+this.itemsPerPage;return this.routes.slice(e,s)},totalPages(){return Math.ceil(this.routes.length/this.itemsPerPage)}},components:{Navbar:fe,MapItem:ue,AddFriend:he,FriendRequest:ve,Badges:_e,Compare:Ee,ProgressBar:ze},methods:{async drawChart(){if(!Array.isArray(this.routes)||this.routes.length===0){console.error("No routes available.");return}const e=this.routes.reduce((d,m)=>{const y=new Date(m.timestamp).toISOString().split("T")[0];return d[y]||(d[y]=0),d[y]+=parseFloat(m.carbon_emission.toFixed(1)),d},{}),s=this.routes.reduce((d,m)=>{const y=new Date(m.timestamp).toISOString().split("T")[0];return d[y]||(d[y]=0),d[y]+=m.distance,d},{}),t=Object.keys(e).sort(),r=t.map(d=>e[d]),a=t.map(d=>s[d]);if(document.getElementById("carbonFootprintChart")){const d=document.getElementById("carbonFootprintChart").getContext("2d");this.myChart&&this.myChart.destroy(),this.routes,this.myChart=new O(d,{type:"bar",data:{labels:t,datasets:[{label:"Carbon Emission",data:r,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Distance Travelled",data:a}]},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Carbon emissions (g CO₂e)"}},x:{title:{display:!0,text:"Date"},ticks:{autoSkip:!0,maxTicksLimit:20}}},plugins:{datalabels:{align:"end",anchor:"end",formatter:(m,y)=>y.datasetIndex===0||y.datasetIndex===1?"":null}}}})}const o=this.routes.map(d=>d.transport_mode),l={};o.forEach(d=>{l[d]?l[d]++:l[d]=1});const u=Object.keys(l),c=Object.values(l);if(document.getElementById("travelCategoryChart")){const d=document.getElementById("travelCategoryChart").getContext("2d");this.myTravelModeChart&&this.myTravelModeChart.destroy(),this.myTravelModeChart=new O(d,{type:"pie",data:{labels:u,datasets:[{data:c,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:2}})}},fetchData(){this.fetchRoutes().then(()=>{this.drawChart()}),this.fetchUser(),this.fetchFriendRequests()},async fetchUser(){const e=`${{}.VITE_API_ENDPOINT}/users/iz/${encodeURIComponent(this.user.email)}`,s={"x-api-key":`${{}.VITE_API_KEY}`};try{const t=await K.get(e,{headers:s});this.friends=t.data.friends,this.userLvl=t.data.level,this.userExp=t.data.exp,this.userEmail=t.data.email,this.carbonSavings=t.data.carbonsavings,this.totalKM=t.data.total_km}catch(t){console.error("Error fetching user",t)}},async fetchFriendRequests(){const e=`${{}.VITE_API_ENDPOINT}/users/${encodeURIComponent(this.user.email)}/friend_requests`,s={"x-api-key":`${{}.VITE_API_KEY}`};try{const t=await K.get(e,{headers:s});this.receivedRequests=t.data.received,this.sentRequests=t.data.sent}catch(t){console.error("Error fetching friend requests",t)}},async fetchRoutes(){const e=this.user.email,s=`${{}.VITE_API_ENDPOINT}/routes/email?email=${encodeURIComponent(e)}`,t={"x-api-key":`${{}.VITE_API_KEY}`};try{const r=await K.get(s,{headers:t});this.routes=r.data.reverse()}catch(r){console.error("Error fetching routes:",r)}},submit(){this.isSubmitted=!0},reset(){this.newFeatures=!1,this.newFriends=!1,this.lostPlace=!1}}},v=e=>(Re("data-v-673d5b27"),e=e(),Se(),e),nt={class:"container-fluid pt-3 bg-supergreen"},lt={class:"row"},dt={class:"col-md-2"},ct={class:"nav flex-column nav-pills",id:"myTabs",role:"tablist"},ut={class:"nav-item"},ht={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",style:{fill:"rgba(236, 227, 206, 1)",transform:"scaleX(-1)",msFilter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)"}},vt=v(()=>n("path",{d:"M12 10c1.151 0 2-.848 2-2s-.849-2-2-2c-1.15 0-2 .848-2 2s.85 2 2 2zm0 1c-2.209 0-4 1.612-4 3.6v.386h8V14.6c0-1.988-1.791-3.6-4-3.6z"},null,-1)),_t=v(()=>n("path",{d:"M19 2H5c-1.103 0-2 .897-2 2v13c0 1.103.897 2 2 2h4l3 3 3-3h4c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2zm-5 15-2 2-2-2H5V4h14l.002 13H14z"},null,-1)),ft=[vt,_t],bt={class:"nav-item"},mt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",style:{fill:"rgba(236, 227, 206, 1)",transform:""}},pt=v(()=>n("path",{d:"m21.447 6.105-6-3a1 1 0 0 0-.895 0L9 5.882 3.447 3.105A1 1 0 0 0 2 4v13c0 .379.214.725.553.895l6 3a1 1 0 0 0 .895 0L15 18.118l5.553 2.776a.992.992 0 0 0 .972-.043c.295-.183.475-.504.475-.851V7c0-.379-.214-.725-.553-.895zM10 7.618l4-2v10.764l-4 2V7.618zm-6-2 4 2v10.764l-4-2V5.618zm16 12.764-4-2V5.618l4 2v10.764z"},null,-1)),yt=[pt],gt={class:"nav-item"},xt={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",style:{fill:"rgba(236, 227, 206, 1)",transform:""}},wt=v(()=>n("path",{d:"M4.035 15.479A3.976 3.976 0 0 0 4 16c0 2.378 2.138 4.284 4.521 3.964C9.214 21.198 10.534 22 12 22s2.786-.802 3.479-2.036C17.857 20.284 20 18.378 20 16c0-.173-.012-.347-.035-.521C21.198 14.786 22 13.465 22 12s-.802-2.786-2.035-3.479C19.988 8.347 20 8.173 20 8c0-2.378-2.143-4.288-4.521-3.964C14.786 2.802 13.466 2 12 2s-2.786.802-3.479 2.036C6.138 3.712 4 5.622 4 8c0 .173.012.347.035.521C2.802 9.214 2 10.535 2 12s.802 2.786 2.035 3.479zm1.442-5.403 1.102-.293-.434-1.053A1.932 1.932 0 0 1 6 8c0-1.103.897-2 2-2 .247 0 .499.05.73.145l1.054.434.293-1.102a1.99 1.99 0 0 1 3.846 0l.293 1.102 1.054-.434C15.501 6.05 15.753 6 16 6c1.103 0 2 .897 2 2 0 .247-.05.5-.145.73l-.434 1.053 1.102.293a1.993 1.993 0 0 1 0 3.848l-1.102.293.434 1.053c.095.23.145.483.145.73 0 1.103-.897 2-2 2-.247 0-.499-.05-.73-.145l-1.054-.434-.293 1.102a1.99 1.99 0 0 1-3.846 0l-.293-1.102-1.054.434A1.935 1.935 0 0 1 8 18c-1.103 0-2-.897-2-2 0-.247.05-.5.145-.73l.434-1.053-1.102-.293a1.993 1.993 0 0 1 0-3.848z"},null,-1)),kt=v(()=>n("path",{d:"m15.742 10.71-1.408-1.42-3.331 3.299-1.296-1.296-1.414 1.414 2.704 2.704z"},null,-1)),Ct=[wt,kt],Mt={class:"nav-item"},Et={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",style:{fill:"rgba(236, 227, 206, 1)",transform:""}},It=v(()=>n("path",{d:"m2.344 15.271 2 3.46a1 1 0 0 0 1.366.365l1.396-.806c.58.457 1.221.832 1.895 1.112V21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1.598a8.094 8.094 0 0 0 1.895-1.112l1.396.806c.477.275 1.091.11 1.366-.365l2-3.46a1.004 1.004 0 0 0-.365-1.366l-1.372-.793a7.683 7.683 0 0 0-.002-2.224l1.372-.793c.476-.275.641-.89.365-1.366l-2-3.46a1 1 0 0 0-1.366-.365l-1.396.806A8.034 8.034 0 0 0 15 4.598V3a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v1.598A8.094 8.094 0 0 0 7.105 5.71L5.71 4.904a.999.999 0 0 0-1.366.365l-2 3.46a1.004 1.004 0 0 0 .365 1.366l1.372.793a7.683 7.683 0 0 0 0 2.224l-1.372.793c-.476.275-.641.89-.365 1.366zM12 8c2.206 0 4 1.794 4 4s-1.794 4-4 4-4-1.794-4-4 1.794-4 4-4z"},null,-1)),Pt=[It],Tt={class:"col-md-10 my-4"},Rt={key:0,class:"tab-pane show active"},St={class:"profile-container bg-light p-3 rounded d-flex flex-column flex-md-row mb-4"},At={class:"pb-3 pb-md-0"},Bt=["src"],Ft={class:"pl-md-4"},Nt={class:"mb-2 glowing-text"},Dt={class:"mb-2"},zt=v(()=>n("b",null,"Level:",-1)),Vt={class:"mb-2"},qt=v(()=>n("b",null,"Handle:",-1)),Lt={class:"mb-2"},Ot=v(()=>n("b",null,"Email:",-1)),Wt={class:"bg-white rounded-3 shadow-sm p-3"},jt=v(()=>n("h3",{class:"mb-0"},"Friends",-1)),Ut={class:"mt-3"},Ht={class:"m-0"},Gt={class:"bg-white rounded shadow-sm p-3 mt-4 mb-4"},Kt=v(()=>n("h3",{class:"mb-0"},"Friend Requests",-1)),Xt={class:"mt-3"},Yt=v(()=>n("h4",{class:"mt-2"},"Received Requests",-1)),$t=v(()=>n("h4",{class:"mt-2"},"Sent Requests",-1)),Jt={key:1,class:"tab-pane"},Zt={class:"pr-4 pb-3 pb-md-0 bg-white p-3 rounded shadow-sm"},Qt=v(()=>n("h3",{class:"mb-2"},"Your Routes",-1)),es={class:"container"},ts={class:"row"},ss={class:"col"},rs={class:"card text-center"},as={class:"card-body p-2"},is=v(()=>n("img",{src:"https://bchewy-images.s3.ap-southeast-1.amazonaws.com/plan-it/Cool+animals.png",alt:"Levels",class:"card-img-top",style:{width:"60px",height:"auto"}},null,-1)),os={class:"card-title"},ns=v(()=>n("p",{class:"card-text"},"Levels gained!",-1)),ls={class:"col"},ds={class:"card text-center"},cs={class:"card-body p-2"},us=v(()=>n("img",{src:"https://bchewy-images.s3.ap-southeast-1.amazonaws.com/plan-it/code+block%0AGreen+cute+space.png",alt:"CO2 Saved",class:"card-img-top",style:{width:"60px",height:"auto"}},null,-1)),hs={class:"card-title"},vs=v(()=>n("p",{class:"card-text"},"CO2 Saved",-1)),_s={class:"col"},fs={class:"card text-center"},bs={class:"card-body"},ms=v(()=>n("img",{src:"https://bchewy-images.s3.ap-southeast-1.amazonaws.com/plan-it/Distance+icons.gif",alt:"Distance travelled",class:"card-img-top",style:{width:"60px",height:"auto"}},null,-1)),ps={class:"card-title"},ys=v(()=>n("p",{class:"card-text"},"travelled",-1)),gs=Te('<div class="chart-container mt-2" data-v-673d5b27><h5 class="mb-2" data-v-673d5b27>Carbon Savings(g) over Distance Travelled (km)</h5><canvas id="carbonFootprintChart" data-v-673d5b27></canvas></div><div class="chart-container mt-4" data-v-673d5b27><h5 class="mb-2" data-v-673d5b27>Travel modes</h5><canvas id="travelCategoryChart" data-v-673d5b27></canvas></div>',2),xs={key:2,class:"tab-pane"},ws={class:"card mt-4 mb-4"},ks=v(()=>n("div",{class:"card-header"},[n("h3",{class:"mb-0"},"Game Stats")],-1)),Cs={key:3,class:"tab-pane"},Ms={class:"card mt-4 mb-4"},Es=v(()=>n("div",{class:"card-header"},[n("h3",{class:"mb-0"},"Settings")],-1)),Is={class:"container m-2"},Ps=v(()=>n("div",{class:"row"},[n("div",{class:"col-12 m2-2"},[n("h1",null,"Notification Settings")])],-1)),Ts={key:0,class:"alert alert-info",role:"alert",style:{margin:"1rem 1rem 1rem 0rem"}},Rs={class:"control-group col-12"},Ss={class:"controls"},As={class:"checkbox-label"},Bs=v(()=>n("label",null,"Notify me about new friends who signed up with my friend code",-1)),Fs=v(()=>n("br",null,null,-1)),Ns={class:"checkbox-label"},Ds=v(()=>n("label",null,"Notify me about new features of PlanIt!",-1)),zs=v(()=>n("br",null,null,-1)),Vs={class:"checkbox-label"},qs=v(()=>n("label",null,"Notify me if I lose my place in the leaderboard",-1)),Ls={key:4,class:"tab-pane"},Os=v(()=>n("div",{class:"card mt-4 mb-4"},[n("div",{class:"card-header"},[n("h3",{class:"mb-0"},"Your Activity")])],-1)),Ws=[Os];function js(e,s,t,r,a,i){const o=P("Navbar"),l=P("ProgressBar"),u=P("AddFriend"),c=P("FriendRequest"),h=P("Badges");return _(),f(D,null,[E(o),n("div",nt,[n("div",lt,[n("div",dt,[n("ul",ct,[n("li",ut,[n("a",{class:N(["nav-link",{active:a.activeTab==="profile"}]),onClick:s[0]||(s[0]=d=>a.activeTab="profile"),href:"#",role:"tab"},[(_(),f("svg",ht,ft)),C(" My Profile")],2)]),n("li",bt,[n("a",{class:N(["nav-link",{active:a.activeTab==="routes"}]),onClick:s[1]||(s[1]=d=>a.activeTab="routes"),href:"#",role:"tab"},[(_(),f("svg",mt,yt)),C(" My Routes")],2)]),n("li",gt,[n("a",{class:N(["nav-link",{active:a.activeTab==="progress"}]),onClick:s[2]||(s[2]=d=>a.activeTab="progress"),href:"#",role:"tab"},[(_(),f("svg",xt,Ct)),C(" My Badges")],2)]),n("li",Mt,[n("a",{class:N(["nav-link",{active:a.activeTab==="settings"}]),onClick:s[3]||(s[3]=d=>a.activeTab="settings"),href:"#",role:"tab"},[(_(),f("svg",Et,Pt)),C(" Settings")],2)])])]),n("div",Tt,[a.activeTab==="profile"?(_(),f("div",Rt,[n("div",St,[n("div",At,[n("img",{src:a.user.picture,class:"img-fluid px-3",alt:"User profile picture"},null,8,Bt)]),n("div",Ft,[n("h3",Nt,g(a.user.name),1),n("p",Dt,[zt,C(" "+g(a.userLvl),1)]),E(l,{userExp:a.userExp},null,8,["userExp"]),n("p",Vt,[qt,C(" @"+g(a.user.nickname),1)]),n("p",Lt,[Ot,C(" "+g(a.user.email),1)])])]),n("div",Wt,[jt,n("div",Ut,[(_(!0),f(D,null,U(a.friends,d=>(_(),f("div",{key:d,class:"mb-3 p-2 bg-light rounded"},[n("h5",Ht,g(d),1)]))),128))])]),n("div",Gt,[Kt,n("div",Xt,[E(u,{user:a.user},null,8,["user"]),Yt,(_(!0),f(D,null,U(a.receivedRequests,d=>(_(),f("div",{key:d,class:"mb-2 p-2 bg-light rounded"},[E(c,{friend:d,user:a.user,receivedRequests:a.receivedRequests,type:"received"},null,8,["friend","user","receivedRequests"])]))),128)),$t,(_(!0),f(D,null,U(a.sentRequests,d=>(_(),f("div",{key:d,class:"mb-2 p-2 bg-light rounded"},[E(c,{friend:d,user:a.user,sentRequests:a.sentRequests,type:"sent"},null,8,["friend","user","sentRequests"])]))),128))])])])):x("",!0),a.activeTab==="routes"?(_(),f("div",Jt,[n("div",Zt,[Qt,n("div",es,[n("div",ts,[n("div",ss,[n("div",rs,[n("div",as,[is,n("h5",os,g(a.userLvl),1),ns])])]),n("div",ls,[n("div",ds,[n("div",cs,[us,n("h5",hs,g(a.carbonSavings.toFixed(2))+"g",1),vs])])]),n("div",_s,[n("div",fs,[n("div",bs,[ms,n("h5",ps,g(a.totalKM.toFixed(2))+"km",1),ys])])])])]),gs])])):x("",!0),a.activeTab==="progress"?(_(),f("div",xs,[n("div",ws,[ks,E(h)])])):x("",!0),a.activeTab==="settings"?(_(),f("div",Cs,[n("div",Ms,[Es,n("div",Is,[Ps,this.isSubmitted?(_(),f("div",Ts," Settings saved! ")):x("",!0),n("div",Rs,[n("div",Ss,[n("div",As,[H(n("input",{type:"checkbox","onUpdate:modelValue":s[4]||(s[4]=d=>a.newFriends=d)},null,512),[[G,a.newFriends]]),Bs]),Fs,n("div",Ns,[H(n("input",{type:"checkbox","onUpdate:modelValue":s[5]||(s[5]=d=>a.newFeatures=d)},null,512),[[G,a.newFeatures]]),Ds]),zs,n("div",Vs,[H(n("input",{type:"checkbox","onUpdate:modelValue":s[6]||(s[6]=d=>a.lostPlace=d)},null,512),[[G,a.lostPlace]]),qs])]),n("button",{class:"border border-success btn btn-light m-1 mt-3 mb-2",onClick:s[7]||(s[7]=d=>i.reset())},"Clear All"),n("button",{class:"border border-success btn btn-success m-1 mt-3 mb-2",onClick:s[8]||(s[8]=d=>i.submit())},"Save")])])])])):x("",!0),a.activeTab==="myactivity"?(_(),f("div",Ls,Ws)):x("",!0)])])])],64)}const Zs=te(ot,[["render",js],["__scopeId","data-v-673d5b27"]]);export{Zs as default};
