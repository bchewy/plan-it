import{P as v}from"./PostComponent-298e32a5.js";import{_ as g,u as I,e as k,bs as P,r as m,o as i,c as u,b as h,a as e,F as y,f as x,l as C,p as N,h as E,i as b}from"./index-0fdca0a9.js";import{a as f}from"./axios-21b846bc.js";import{C as A}from"./CommunitySidebar-40a6d63f.js";import{N as w}from"./Navbar-faf4802b.js";const T={name:"Community",components:{NavBar:w,PostComponent:v,CommunitySidebar:A},setup(){const{loginWithRedirect:s,user:a,isAuthenticated:d}=I(),o=k([]),l=async()=>{const n=`${{}.VITE_API_ENDPOINT}/posts`,_={"x-api-key":`${{}.VITE_API_KEY}`};try{const r=await f.get(n,{headers:_});for(let c of r.data)c.useremail==a.value.email&&o.value.push(c)}catch(r){console.error("error",r)}o.value.reverse()};return P(a,async n=>{n&&await l()},{immediate:!0}),{user:a,posts:o,fetchPosts:l}},methods:{async deletePost(s){const a=`${{}.VITE_API_ENDPOINT}/posts/${s}`,d={"x-api-key":`${{}.VITE_API_KEY}`};try{const o=await f.delete(a,{headers:d})}catch(o){console.error("Error",o)}location.reload()}}},p=s=>(N("data-v-cc2000b5"),s=s(),E(),s),B={class:"container-fluid vh-100 bg-supergreen pb-3 position-relative",style:{"background-color":"#cbdbb7"}},V={class:"sticky-top border-bottom",style:{"background-color":"#cbdbb7","z-index":"1"}},$=p(()=>e("div",{class:"text-center h2 mb-3 pt-4"},[e("span",{class:"header text-muted",style:{"font-weight":"bold"}},"Your Activity ")],-1)),S={class:"row justify-content-center",style:{"background-color":"#cbdbb7"}},D={class:"col justify-content-center d-flex mb-5"},Y=["data-bs-target"],F=["id","aria-labelledby"],j={class:"modal-dialog"},K={class:"modal-content"},O=p(()=>e("div",{class:"modal-body fs-5 text-center"},[b(" Are you sure you want to delete this post? "),e("br"),b(" This action is "),e("strong",null,"irreversible"),b("! ")],-1)),z={class:"modal-footer justify-content-center"},L=p(()=>e("button",{type:"button",class:"btn btn-secondary col-3","data-bs-dismiss":"modal"},"Cancel",-1)),R=["onClick"];function W(s,a,d,o,l,n){const _=m("NavBar"),r=m("CommunitySidebar"),c=m("PostComponent");return i(),u(y,null,[h(_),e("div",B,[e("div",V,[h(r),$]),e("div",S,[(i(!0),u(y,null,x(o.posts,t=>(i(),u("div",null,[(i(),C(c,{key:t._id,username:t.username,profileImage:t.userprofile,timePosted:t.timestamp,badge:t.badge,taggedFriends:t.taggedfriends,liked:t.likes,content:t.content,postID:t._id,useremail:o.user.email},null,8,["username","profileImage","timePosted","badge","taggedFriends","liked","content","postID","useremail"])),e("div",D,[e("button",{type:"button",class:"btn btn-danger","data-bs-toggle":"modal","data-bs-target":"#a"+t._id},"Delete post! ",8,Y),e("div",{class:"modal fade",id:"a"+t._id,tabindex:"-1","aria-labelledby":t._id,"aria-hidden":"true"},[e("div",j,[e("div",K,[O,e("div",z,[L,e("button",{type:"button",class:"btn btn-danger col-3","data-bs-dismiss":"modal",onClick:q=>n.deletePost(t._id)},"Confirm",8,R)])])])],8,F)])]))),256))])])],64)}const U=g(T,[["render",W],["__scopeId","data-v-cc2000b5"]]);export{U as default};
